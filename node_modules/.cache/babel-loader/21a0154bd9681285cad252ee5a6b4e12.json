{"ast":null,"code":"var _jsxFileName = \"/home/demonwolf/WebstormProjects/SPE-final-project/client/src/App.js\";\nimport 'react-bootstrap';\nimport React from 'react';\nimport './App.css';\nimport Web3 from 'web3';\nimport ModelABI from './contracts/Model.json';\nimport RegisterScreen from \"./components/RegisterScreen\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Welcome extends React.Component {\n  componentWillMount() {\n    this.loadWeb3().then(r => {\n      console.log(\"verified the browser support for ehtereum\");\n    });\n    this.connectBlockChainData().then(r => {\n      console.log(\"Data fecthed from blockchain\");\n    });\n  }\n\n  constructor(props) {\n    super(props);\n    this.currentAccount = null;\n    this.contract = null;\n    this.existingUser = null;\n  }\n\n  async getUserState() {\n    let x = 0;\n    let rvalue = 0;\n    await this.contract.methods.userExist(this.currentAccount).call().then(function (result) {\n      rvalue = result;\n    });\n    console.log(\"printing r value\" + rvalue);\n    this.existingUser = rvalue;\n  }\n\n  async addUser(name, location, email, phone) {\n    await this.contract.methods.addUser(name, location, email, phone).send({\n      from: this.currentAccount\n    });\n  }\n\n  async loadWeb3() {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      await window.ethereum.enable();\n    } else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider);\n    } else {\n      window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!');\n    }\n  }\n\n  async RegisterUser(name, location, email, phone) {\n    await this.contract.methods.addUser(name, location, email, phone).send({\n      from: this.currentAccount\n    });\n  }\n\n  async connectBlockChainData() {\n    const web3 = await new Web3(Web3.givenProvider || \"http://localhost:8545\");\n    const accounts = await web3.eth.getAccounts();\n    this.currentAccount = accounts[0];\n    console.log(accounts[0]);\n    console.log(this.currentAccount);\n    const networkId = await web3.eth.net.getId();\n    const networkData = ModelABI.networks[networkId];\n\n    if (networkData) {\n      const Model = new web3.eth.Contract(ModelABI.abi, networkData.address);\n      this.contract = Model; //setExistingUser(memoizedValue);\n      //console.log(existingUser);\n\n      this.existingUser = await this.getUserState();\n      console.log(this.existingUser);\n    } else {\n      window.alert(\"Please switch to Ganache Network!!\");\n    }\n  }\n\n  renderAuthButton() {\n    if (this.existingUser == true) return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"hello\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 16\n    }, this);else return /*#__PURE__*/_jsxDEV(RegisterScreen, {\n      Account: this.currentAccount\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 16\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: this.renderAuthButton()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default Welcome;","map":{"version":3,"sources":["/home/demonwolf/WebstormProjects/SPE-final-project/client/src/App.js"],"names":["React","Web3","ModelABI","RegisterScreen","Welcome","Component","componentWillMount","loadWeb3","then","r","console","log","connectBlockChainData","constructor","props","currentAccount","contract","existingUser","getUserState","x","rvalue","methods","userExist","call","result","addUser","name","location","email","phone","send","from","window","ethereum","web3","enable","currentProvider","alert","RegisterUser","givenProvider","accounts","eth","getAccounts","networkId","net","getId","networkData","networks","Model","Contract","abi","address","renderAuthButton","render"],"mappings":"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","sourcesContent":["import 'react-bootstrap'\nimport React from 'react';\nimport './App.css';\nimport Web3 from 'web3'\nimport ModelABI from './contracts/Model.json';\nimport RegisterScreen from \"./components/RegisterScreen\";\n\nclass Welcome extends React.Component {\n\n    componentWillMount() {\n        this.loadWeb3().then(r=>{console.log(\"verified the browser support for ehtereum\")})\n        this.connectBlockChainData().then(r => {console.log(\"Data fecthed from blockchain\")})\n    }\n\n  constructor(props) {\n      super(props);\n      this.currentAccount = null;\n      this.contract = null;\n      this.existingUser = null;\n  }\n\n  async getUserState(){\n        let x =0;\n        let rvalue =0;\n        await this.contract.methods.userExist(this.currentAccount).call()\n          .then(function (result){\n              rvalue = result;\n\n          });\n      console.log(\"printing r value\" + rvalue);\n      this.existingUser =  rvalue;\n    }\n\n  async addUser(name, location, email, phone){\n    await this.contract\n        .methods\n        .addUser(name, location, email, phone)\n        .send({from : this.currentAccount});\n\n}\n\n\n  async loadWeb3() {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum)\n      await window.ethereum.enable()\n    }\n    else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider)\n    }\n    else {\n      window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!')\n    }\n  }\n\n  async RegisterUser(name, location, email, phone){\n    await this.contract\n        .methods\n        .addUser(name, location, email, phone)\n        .send({from : this.currentAccount});\n  }\n\n\n\n  async connectBlockChainData(){\n    const web3 = await new Web3(Web3.givenProvider || \"http://localhost:8545\")\n    const accounts = await web3.eth.getAccounts()\n    this.currentAccount = accounts[0];\n    console.log(accounts[0]);\n    console.log(this.currentAccount);\n    const networkId = await web3.eth.net.getId();\n    const networkData = ModelABI.networks[networkId];\n    if(networkData){\n      const Model = new web3.eth.Contract(ModelABI.abi,networkData.address);\n      this.contract = Model;\n      //setExistingUser(memoizedValue);\n      //console.log(existingUser);\n        this.existingUser =await this.getUserState();\n        console.log(this.existingUser);\n    }\n    else{\n      window.alert(\"Please switch to Ganache Network!!\")\n    }\n  }\n\n  renderAuthButton(){\n    if(this.existingUser == true)\n        return <h1>hello</h1>\n    else\n        return <RegisterScreen Account ={this.currentAccount} />\n\n  }\n  render()\n{\n    return (\n\n        <div className=\"App\">\n            {\n                this.renderAuthButton()\n            }\n        </div>);\n}\n\n\n}\n\nexport default Welcome;\n"]},"metadata":{},"sourceType":"module"}